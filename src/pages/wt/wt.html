<!--
  Generated template for the ParkingPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.  
-->

<ion-header>
  <ion-toolbar>
    <ion-buttons style=" 
    position: absolute;
    left: 0;
    z-index: 9999;
    color: white;" start>
      <button (click)="openclose();" menuToggle ion-button icon-only color="royal">
        <img style="
        width: 30px" class="logo" src="assets/img/hamburger.png" />
      </button>
    </ion-buttons>
     
    <img style="margin-left:50px;" class="logo" src="assets/img/logo_wad.jpg" />
 
    <ion-buttons end>
      <button  style="color:white;"ion-button icon-only color="royal">
        <ion-icon name="person-add"></ion-icon>
        <span>{{nickname}}<br>{{code}}</span>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-menu type="overlay" [content]="mycontent">
  
  <ion-content>

    <ion-list (click)="gotolink(0)">
      <ion-item>주문파트</ion-item>
    </ion-list>
    <ion-list (click)="gotolink(2)">
      <ion-item>인포파트</ion-item>
    </ion-list>
    <ion-list (click)="gotolink(3)">
      <ion-item>출근부</ion-item>
    </ion-list>
    <ion-list (click)="gotolink(4)">
      <ion-item>초이스</ion-item>
    </ion-list>
    <ion-list>
      <ion-item (click)="gotolink(5)">공지</ion-item>
    </ion-list>
   
    <ion-list>
      <ion-item (click)="gotolink(6)">입금</ion-item>
    </ion-list>

    <ion-list>
      <ion-item (click)="gotolink(7)">서빙내역</ion-item>
    </ion-list>

    <ion-list>
      <ion-item (click)="gotolink(8)">판매내역</ion-item>
    </ion-list>
    <ion-list>
      <ion-item (click)="logout();">로그아웃</ion-item>
    </ion-list>

    <ion-list *ngIf="!paymentflag">
      <ion-item (click)="gotopayment();">결제진행</ion-item>
    </ion-list>
  </ion-content>

</ion-menu>

<ion-nav #mycontent [root]="rootPage"></ion-nav>

<ion-content  #targetElement (touchstart)="onTouchStart($event)"  (touchmove)="onTouchMove($event)" (touchend)="onTouchEnd($event)" style="
background: white; margin-top:45px;" padding>

<div class="headerr">

    <span style="    font-size: 25px;
    margin-left: 20px;">{{currentstartday}}</span>
      <button   style="
          width: 87px;
  border-radius
  : 10px;
      background: orange;
      border: solid 1px;
      color: black;
      height: 45px;
      margin-left: 15px; ">{{bu}} 부</button>
  <span style="    
  margin-left:15px; 
  font-size: 30px;
  font-weight: 900;">{{nowtime}}</span>
</div>

<hr class="header-parking-hr">


<div class="c">
  <div class="orderlisting" style="
  text-align: center; color:black;" *ngIf="orderlist.length==0">
    <p > 본 영업일에 주문처리된 내역이 없습니다.. </p>
 
    </div>
    <ion-list class="accordion-list">
      <ion-list-header style="    box-shadow: 1px 1px 1px 1px;" *ngFor="let i of orderlist; let j = index;"no-lines no-padding>
        <button *ngIf="i.status=='fin'" style="background:gray;" ion-item detail-none [ngClass]="{'section-active':i.open, 'section':!i.open}" (click)="togglesection(j)">
         <ion-icon item-left name="arrow-forward" *ngIf="!i.open"></ion-icon>
         <ion-icon item-left name="arrow-down" *ngIf="i.open"></ion-icon>
        

         <div  class="centr">

          <span *ngIf="i.logic==1" style="    font-size: 16px;
         background: yellow;">{{i.roomno}}T   {{i.incharge}} </span> <span *ngIf="i.logic==1" style="    font-size: 12px;
         "> 1ㅅㅌㅌ</span> 
<span *ngIf="i.logic==2" style="    font-size: 16px;
background: yellow;">{{i.roomno}}T   {{i.incharge}} </span> <span *ngIf="i.logic==2" style="    font-size: 12px;
"> 2ㅅㅌㅌ</span> 

<span *ngIf="!i.logic" style="    font-size: 16px;
background: yellow;">{{i.roomno}}T   {{i.incharge}} </span> <span *ngIf="i.logic==0||i.logic==false||i.logic==undefined" style="    font-size: 12px;
"> 중방/대방 OFF.</span> 
     
             <p *ngIf="i.noflag" style=" color:red;
             letter-spacing: 1px !important;
             font-size: 16px;
             margin: 0;"> W/T : {{i.wt}} , 방 인원 : {{i.numofpeople}}, 아가씨 : {{i.inagasi}} 총 술병수 : {{i.tbottle}}</p>
             <p *ngIf="!i.noflag||i.noflag==undefined" style=" color:black;
             letter-spacing: 1px !important;
             font-size: 16px;
             margin: 0;"> W/T : {{i.wt}} , 방 인원 : {{i.numofpeople}}, 아가씨 : {{i.inagasi}} 총 술병수 : {{i.tbottle}}</p>
         </div>


        </button>

        <button *ngIf="i.status!='fin'"  ion-item detail-none [ngClass]="{'section-active':i.open, 'section':!i.open}" (click)="togglesection(j)">
          <ion-icon item-left name="arrow-forward" *ngIf="!i.open"></ion-icon>
          <ion-icon item-left name="arrow-down" *ngIf="i.open"></ion-icon>
         
 
          <div  class="centr">
<!--  
           <span *ngIf="i.logic" style="    font-size: 16px;
           background: yellow;">{{i.roomno}}T   {{i.incharge}} / 중방/대방 ON</span> 
         <span *ngIf="!i.logic" style="    font-size: 16px;
         background: yellow;">{{i.roomno}}T   {{i.incharge}} / 중방/대방 OFF</span>  -->
         <span *ngIf="i.logic==1" style="    font-size: 16px;
         background: yellow;">{{i.roomno}}T   {{i.incharge}} </span> <span *ngIf="i.logic==1" style="    font-size: 12px;
         "> 1ㅅㅌㅌ</span> 
<span *ngIf="i.logic==2" style="    font-size: 16px;
background: yellow;">{{i.roomno}}T   {{i.incharge}} </span> <span *ngIf="i.logic==2" style="    font-size: 12px;
"> 2ㅅㅌㅌ</span> 

<span *ngIf="!i.logic" style="    font-size: 16px;
background: yellow;">{{i.roomno}}T   {{i.incharge}} </span> <span *ngIf="i.logic==0||i.logic==false||i.logic==undefined" style="    font-size: 12px;
"> 중방/대방 OFF.</span> 
        <p *ngIf="i.noflag" style=" color:red;
        letter-spacing: 1px !important;
        font-size: 16px;
        margin: 0;"> W/T : {{i.wt}} , 방 인원 : {{i.numofpeople}}, 아가씨 : {{i.inagasi}} 총 술병수 : {{i.tbottle}}</p>
        <p *ngIf="!i.noflag||i.noflag==undefined" style=" color:black;
        letter-spacing: 1px !important;
        font-size: 16px;
        margin: 0;"> W/T : {{i.wt}} , 방 인원 : {{i.numofpeople}}, 아가씨 : {{i.inagasi}} 총 술병수 : {{i.tbottle}}</p>
          </div>
 
 
         </button>
        <ion-item  *ngIf="i.open" class="child-item" >
          <p style="
          margin: 0;"> 주문일 : {{i.date}}</p>
            <span *ngFor="let j of i.value">
            
            <p style="
            margin: 0;" *ngIf="j.category=='주류'">{{j.name}} , {{j.num}}병, {{j.price.toLocaleString()}}원</p>
            <p style="
            margin: 0;"  *ngIf="j.category!='주류'">{{j.name}} , {{j.num}}개, {{j.price.toLocaleString()}}원</p>
          </span>
         <p style="
          margin: 0;"> 완티 : {{i.tcarray}} 차삼: {{i.chasamarray}}</p>
          <p style="
          margin: 0;">TC : {{i.tctotal}}.{{i.chasam}}개 , {{i.money.toLocaleString()}}원</p>
          <p style="
          margin: 0;">연티 : {{i.yeonti}}</p>



<p style="
font-size: 12px;
margin: 0;">{{i.reason}}</p>
          <p style="    font-size: 18px;
          background: pink;
          width: 160px;">합계 :  {{(i.tp+i.money+(i.yeonti*10000) ).toLocaleString()}}</p>
        </ion-item>
      </ion-list-header>
     
    </ion-list>

  </div> 
<!-- <div style="    padding: 20px;" class="c">
  <div class="orderlisting" style="
  text-align: center; color:black;" *ngIf="mainlist.length==0">
    <p > 본 영업일에 주차처리된 내역이 없습니다. </p>
 
    </div>
  </div> -->
<div  *ngFor="let i of mainlist; let j = index;">
<!-- <button  ion-long-press [interval]="800"  (pressEnded)="released(i , j)" (click)="extendedAccordion(1, j)" class="accordion" id="accordion-{{i}}">
  <div>
    <p>{{i.date}}</p>
    <p>{{i.time}}</p>
    <p>입력자 : {{i.receiver}}</p>
  </div>
  <div>
    <p>{{i.room}} {{i.incharge}} ₩{{i.price.toLocaleString() }}</p>
    <p>{{i.type}}</p>
    <img src="assets/img/bottomarrow.png" style="height: 20px; width: 20px;">
  </div>
</button> -->
<div style="color:black;" class="panel-1" id="panel-1-{{j}}">
  <div>
    <p *ngIf="i.type=='발렛'">{{i.carnum}}</p>
    <p *ngIf="i.type=='대리'||i.type=='픽업'">{{i.destination}}</p>
  </div>
</div>
<hr style="width: 90%; height: 1px; background-color: black;">
</div>
<!--


<div  class="ion-label-area">
  <div id="ion-label-area-1">
    <div  *ngFor="let i of mainlist; let j = index;">
      <button (click)="extendedAccordion(1, j)" class="accordion" id="accordion-{{i}}">
        <div>
          <p>{{i.date}}</p>
          <p>{{i.time}}</p>
          <p>입력자 : {{i.receiver}}</p>
        </div>
        <div>
          <p>{{i.room}} {{i.incharge}} ₩{{i.price.toLocaleString() }}</p>
          <p>{{i.type}}</p>
          <img src="assets/img/bottomarrow.png" style="height: 20px; width: 20px;">
        </div>
      </button>
      <div style="color:white;" class="panel-1" id="panel-1-{{j}}">
        <div>
          <p *ngIf="i.type=='발렛'">{{i.carnum}}</p>
          <p *ngIf="i.type=='대리'||i.type=='픽업'">{{i.destination}}</p>
        </div>
      </div>
      <hr style="width: 90%; height: 1px; background-color: white;">
    </div>
  </div>
  <div id="ion-label-area-2" style="display: none;">
    two
  </div>
  <div id="ion-label-area-3" style="display: none;">
    three
  </div>
  <div id="ion-label-area-4" style="display: none;">
    <div *ngFor="let i of allmainlist let j = index">
     
      <button (click)="extendedAccordion(4, j)" class="accordion" id="accordion-{{i}}">
        <p style="font-size:20px; width:150px;">{{i.a[0].date}}</p>
        <p style="margin-top: 20px;;"><img src="assets/img/bottomarrow.png"
            style="height: 20px; width: 20px;"></p>

        <p style="flex: 4; 
        font-size: 20px; text-align: end;">일계:{{i.count}} 합계:{{i.price.toLocaleString()}}</p>
      </button>
      <div style="
      color: white;" class="panel-4" id="panel-4-{{j}}">
        <div class="looping" *ngFor="let b of i.a">
          <div>
            <span>{{b.date}}</span>
            <span>{{b.time}}</span>
            <span>입력자: {{b.receiver}}</span>
          </div>
          <div style="margin-left:20px;">
            <span>{{b.room}} {{b.incharge}} ₩{{b.price.toLocaleString()}}</span>
            <span>{{b.type}}</span>
            <span *ngIf="b.type=='발렛'">{{b.carnum}}</span>
            <span *ngIf="b.type=='대리'||b.type=='픽업'">{{b.destination}}</span>
          </div>
        </div>
        
      </div>
      <hr style="width: 90%; height: 1px; background-color: white; margin-top: 0px;">
    </div>
  </div>
</div> -->

</ion-content>